<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calendar Event List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            padding: 20px;
            gap: 20px;
        }

        .calendar, .calendar-event-list {
            flex: 1;
            max-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .btn {
            background-color: #08997a;
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #067a64;
        }

        .days-of-week, .days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .days-of-week div, .day {
            padding: 10px;
            border-radius: 5px;
        }

        .days-of-week div {
            background-color: #08997a;
            color: #fff;
            text-align: center;
        }

        .day {
            background-color: #f0f0f0;
            cursor: pointer;
            text-align: center;
        }

        .day:hover {
            background-color: #05cca1;
            color: white;
        }

        .event-day {
            background-color: #ff4d4d !important;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .modal.show {
            display: block;
            width: 350px;
        }

        .calendar-event-list h3 {
            margin-bottom: 10px;
        }

        .calendar-event-list ul {
            list-style-type: none;
            padding: 0;
        }

        .calendar-event-list li {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }

        .event-date-container {
            margin-top: 10px;
            font-size: 0.9em;
            color: #555;
            font-weight: normal;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .event-date {
            font-size: 0.9em;
            color: #08997a;
            font-weight: bold;
        }

        /* Styling for event title and icon */
        .event-item {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .event-item .event-icon {
            font-size: 1.5em;
        }

        .event-item .event-text {
            font-size: 1.2em;
            font-weight: bold;
        }

        .event-item .event-date-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
    </style>
</head>
<body>

<div class="calendar">
    <div class="header">
        <button class="btn" id="prevMonthBtn">Previous</button>
        <h2 id="monthYear"></h2>
        <div id="liveTime">00:00:00</div>
        <button class="btn" id="nextMonthBtn">Next</button>
    </div>
    <div class="days-of-week">
        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    </div>
    <div class="days" id="calendarDays"></div>
</div>

<div class="calendar-event-list">
    <h3>ðŸŒ± Planting and Harvest Schedule</h3>
    <ul id="eventList"></ul>
</div>

<div class="modal" id="eventModal">
    <h3>Enter Event</h3>
    <input type="text" id="eventDescription" placeholder="Enter event description"><br><br>
    <input type="time" id="eventTime"><br><br>
    <button class="btn" id="saveEventBtn">Save</button>
    <button class="btn" onclick="closeModal()">Close</button>
</div>

<script>
    const monthNames = ["January", "February", "March", "April", "May", "June",
                        "July", "August", "September", "October", "November", "December"];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    let events = [
        {
            title: "Rice",
            day: 10,
            month: 9,  // October (0-indexed)
            year: 2025,
            time: "08:00",
            growth_duration: 2 // October + 2 months = December
        }
    ];

    function updateClock() {
        const now = new Date();
        document.getElementById("liveTime").textContent = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    function generateCalendar(month, year) {
        const calendarDays = document.getElementById('calendarDays');
        calendarDays.innerHTML = '';
        document.getElementById('monthYear').innerText = `${monthNames[month]} ${year}`;

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
            calendarDays.appendChild(document.createElement('div'));
        }

        for (let day = 1; day <= daysInMonth; day++) {
            const dayDiv = document.createElement('div');
            dayDiv.classList.add('day');
            dayDiv.textContent = day;

            const today = new Date();
            if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                dayDiv.style.color = "black";
                dayDiv.style.border = "2px solid darkgreen";
            }

            const eventForDay = events.find(e => e.day === day && e.month === month && e.year === year);
            if (eventForDay) {
                dayDiv.classList.add('event-day');
                dayDiv.title = eventForDay.title;
            }

            dayDiv.addEventListener('click', () => openEventModal(day, month, year, eventForDay));
            calendarDays.appendChild(dayDiv);
        }
    }

    function renderEventList() {
        const eventList = document.getElementById('eventList');
        eventList.innerHTML = '';

        if (!events.length) {
            eventList.innerHTML = '<li>No events found.</li>';
            return;
        }

        events.forEach(event => {
            const li = document.createElement('li');

            const plantingDate = `${event.month + 1}/${event.day}/${event.year}`;
            const harvestDate = new Date(event.year, event.month, event.day);
            const duration = event.growth_duration || 3;
            harvestDate.setMonth(harvestDate.getMonth() + duration);
            const harvestMonth = harvestDate.getMonth() + 1;
            const harvestDay = event.day;
            const harvestYear = harvestDate.getFullYear();

            const eventItem = document.createElement('div');
            eventItem.classList.add('event-item');

            const eventIcon = document.createElement('span');
            eventIcon.classList.add('event-icon');
            eventIcon.textContent = "ðŸŒ±";  // Planting Icon

            const eventText = document.createElement('span');
            eventText.classList.add('event-text');
            eventText.textContent = event.title;

            const dateContainer = document.createElement('div');
            dateContainer.classList.add('event-date-container');

            const eventDate = document.createElement('span');
            eventDate.classList.add('event-date');
            eventDate.textContent = `Planting: ${plantingDate}`;

            const harvestDateText = document.createElement('span');
            harvestDateText.classList.add('event-date');
            harvestDateText.textContent = `Harvest: ${harvestMonth}/${harvestDay}/${harvestYear}`;

            dateContainer.appendChild(eventDate);
            dateContainer.appendChild(harvestDateText);

            eventItem.appendChild(eventIcon);
            eventItem.appendChild(eventText);
            eventItem.appendChild(dateContainer);

            li.appendChild(eventItem);

            eventList.appendChild(li);
        });
    }

    function openEventModal(day, month, year, eventForDay) {
        const modal = document.getElementById('eventModal');
        modal.classList.add('show');

        if (eventForDay) {
            document.getElementById('eventDescription').value = eventForDay.title;
            document.getElementById('eventTime').value = eventForDay.time;
        }

        document.getElementById('saveEventBtn').onclick = function () {
            const desc = document.getElementById('eventDescription').value.trim();
            const time = document.getElementById('eventTime').value;
            if (desc && time) {
                events.push({ title: desc, day, month, year, time, growth_duration: 2 });
                closeModal();
                generateCalendar(currentMonth, currentYear);
                renderEventList();
            }
        };
    }

    function closeModal() {
        document.getElementById('eventModal').classList.remove('show');
    }

    document.getElementById('prevMonthBtn').onclick = () => {
        if (currentMonth === 0) {
            currentMonth = 11;
            currentYear--;
        } else {
            currentMonth--;
        }
        generateCalendar(currentMonth, currentYear);
    };

    document.getElementById('nextMonthBtn').onclick = () => {
        if (currentMonth === 11) {
            currentMonth = 0;
            currentYear++;
        } else {
            currentMonth++;
        }
        generateCalendar(currentMonth, currentYear);
    };

    generateCalendar(currentMonth, currentYear);
    renderEventList();
</script>

</body>
</html>
